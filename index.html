<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection"content="telephone=no, email=no" />
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="HandheldFriendly" content="true">
	<meta name="MobileOptimized" content="320">
	<meta name="screen-orientation" content="portrait">
	<meta name="x5-orientation" content="portrait">
	<meta name="full-screen" content="yes">
	<meta name="x5-fullscreen" content="true">
	<meta name="browsermode" content="application">
	<meta name="x5-page-mode" content="app">
	<meta name="msapplication-tap-highlight" content="no">
	<meta name="viewport" content="width=640,target-densitydpi=device-dpi,maximum-scale=1.0, user-scalable=no">
	<script>
    	 function setWidth(a){if(/Andriod/i.test(navigator.userAgent)){var c,b=window.innerWidth;(b!=a)&&(c=b/a),document.addEventListener("DOMContentLoaded",function(){var d = document.getElementsByTagName("body")[0];d.style.webkitTransformOrigin = "left top";d.style.webkitTransform="scale("+c+")"},!1)}}setWidth(640);
   	</script>

	<title>移动端图片裁剪工具</title>
	<link rel="stylesheet" href="css/jie_style.css">
   	<script type="text/javascript" src="js/pCutting.1.1.js"></script>
   	<style>
		.headbox{ overflow:hidden; }
		.fix{ position: fixed; z-index: 10010; top: 0; left: 0; width: 100%; height: 80px; font-size: 22px; line-height: 80px; text-align: center; background: #fff; }
   	</style>
</head>
<body>
<div class="wrap">
	<div class="fix">等待输出</div>
	<div id="loading"><div></div></div>
	<canvas id="canvas"></canvas>
	<div class="yuanbox"><img src="images/ico_upfile.png" alt="" class="yuanpic" id="yuanpic"></div>
	<div class="fixbox" id="fixbox">
		<input type="file" id="head_file">
		<div class="headbox" id="headbox">
			<div class="head_picbox" id="head_picbox" style="width: 640px; height: 640px;"></div>
		</div>	
		<div class="btnbox">
			<a href="javascript:void(0);" class="btn head_confirm" id="btnConfirm">保存</a>
			<a href="javascript:void(0);" class="btn head_cancel" id="btnCancel">取消</a>
		</div>
	</div>
	<script type="text/javascript">
		var yuanpic = document.getElementById("yuanpic")
		var input = document.getElementById("head_file");
		var loading = document.getElementById("loading");
		var fixbox = document.getElementById("fixbox");

		yuanpic.onclick =function(){ input.click(); };

		

		var myPic = new pCutting("#head_picbox",{
			input: document.getElementById("head_file"),
			touchObj: "#head_picbox",
			btnConfirm: "#btnConfirm",		//确定按钮
			btnCancel: "#btnCancel",			//取消按钮,
			touchStartFunc: function(){
				
			},
			fileLoadFunc: function(){
				loading.style.display = "block";
			},
			touchLoadEnd: function(){
				loading.style.display = "none";
				fixbox.style.display = "block";
			},
			saveFunc: function(){
				fixbox.style.display = "none";
				yuanpic.src = myPic.newUrl;
			},
			cancelFunc: function(){
				fixbox.style.display = "none";
			}
		})
		


		

	</script>
</div>
</body>
</html>
